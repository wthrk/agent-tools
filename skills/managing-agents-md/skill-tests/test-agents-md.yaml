# managing-agents-md test cases
desc: "AGENTS.md管理スキルのテスト"

assertions:
  has-project-overview:
    desc: "Project Overviewセクションの存在"
    type: regex
    pattern: "## (Project )?Overview"
    expect: present

  has-technology-stack:
    desc: "Technology Stackセクションの存在"
    type: regex
    pattern: "## Technology Stack"
    expect: present

  has-commands:
    desc: "Development Commandsセクションの存在"
    type: regex
    pattern: "## (Development )?Commands"
    expect: present

  has-code-block:
    desc: "コードブロックの存在"
    type: contains
    pattern: "```"
    expect: present

  has-never-do:
    desc: "Never Doの存在"
    type: regex
    pattern: "Never Do|never|禁止"
    expect: present

  has-rust-mention:
    desc: "Rust言及"
    type: regex
    pattern: "Rust|cargo"
    expect: present

  has-node-mention:
    desc: "Node言及"
    type: regex
    pattern: "Node|npm|pnpm|yarn|TypeScript"
    expect: present

  has-boundaries:
    desc: "Boundariesセクションの存在"
    type: regex
    pattern: "## Boundaries"
    expect: present

scenarios:
  generate-rust-agents:
    desc: "Rustプロジェクト用AGENTS.md生成"
    prompt: |
      managing-agents-mdスキルのテンプレートに従って、以下のRustプロジェクト用のAGENTS.md内容を生成してください。
      ファイルは作成せず、テキストとして出力してください。

      プロジェクト情報:
      - 言語: Rust 1.85
      - ビルド: cargo build --release
      - テスト: cargo test
      - プロジェクト名: my-rust-app
      - 説明: CLIツール
    assertions:
      - has-project-overview
      - has-technology-stack
      - has-commands
      - has-code-block
      - has-rust-mention
      - has-boundaries

  generate-node-agents:
    desc: "Node.jsプロジェクト用AGENTS.md生成"
    prompt: |
      managing-agents-mdスキルのテンプレートに従って、以下のNode.jsプロジェクト用のAGENTS.md内容を生成してください。
      ファイルは作成せず、テキストとして出力してください。

      プロジェクト情報:
      - 言語: TypeScript
      - パッケージマネージャー: npm
      - テスト: npm test
      - ビルド: npm run build
      - プロジェクト名: my-node-app
      - 説明: Webアプリケーション
    assertions:
      - has-project-overview
      - has-technology-stack
      - has-commands
      - has-code-block
      - has-node-mention
      - has-boundaries

  check-boundaries-content:
    desc: "Boundariesセクションの内容確認"
    prompt: |
      AGENTS.mdのBoundariesセクションには「Never Do」として以下を含めるべきです:
      - シークレットやクレデンシャルをコミットしない
      - 保護されたファイルを変更しない

      Rustプロジェクトの場合、追加で含めるべき「Never Do」項目を3つ挙げてください。
    assertions:
      - has-never-do
